<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="inherit_production_order_piece_rate" model="ir.ui.view">
        <field name="name">inherit.production.order.piece.rate</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.mrp_production_form_view" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='origin']" position="after">
                <field name="so_id" readonly="1"/>
                <field name="so_line_id" readonly="1"/>
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="Piece Rate">
                    <field name="piece_rate_ids" attrs="{'readonly': [('state', '=', 'done')]}"/>
                </page>
                <field name="piece_rate_ids">
                    <tree editable="bottom">
<!--                            <field name="name"/>-->
                            <field name="operation_id"/>
                            <field name="operation_code"/>
                            <field name="employee_id"/>
                            <field name="bundle_id" domain="[('parent_state', '=', 'confirm')]"/>
                            <field name="qty"/>
                            <field name="rate" force_save="1"/>
                            <field name="total_amount" sum="Sum Total"/>
                            <field name="is_completed"/>
                            <field name="complete_date"/>
                    </tree>
                    <form>
                        <group>
                            <group>
<!--                                <field name="name"/>-->
                                <field name="operation_id"/>
                                <field name="operation_code"/>
                                <field name="employee_id"/>
                                <field name="qty"/>
                                <field name="rate"/>
                                <field name="total_amount"/>
                                <field name="is_completed"/>
                                <field name="complete_date"/>
                            </group>
                        </group>
                    </form>
                </field>
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page string="Piece Rate Operations">
                    <field name="piece_rate_operations_ids" attrs="{'readonly': [('state', '=', 'done')]}"/>
                </page>
                <field name="piece_rate_operations_ids">
                    <tree editable="bottom">
                            <field name="operation_id"/>
                            <field name="operation_code"/>
                            <field name="operation_qty"/>
                            <field name="total_qty"/>
                            <field name="rate"/>
                            <field name="total_amount" sum="Total Estimate"/>
                    </tree>
                    <form>
                        <group>
                            <group>
<!--                                <field name="name"/>-->
                                <field name="operation_id"/>
                                <field name="operation_code"/>
<!--                                <field name="employee_id"/>-->
                                <field name="operation_qty"/>
                                <field name="total_qty"/>
                                <field name="rate"/>
                                <field name="total_amount"/>
                            </group>
                        </group>
                    </form>
                </field>
            </xpath>
        </field>
    </record>
</odoo>